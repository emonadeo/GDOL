---
import { container } from './index.css.ts';

import { api } from 'src/api.ts';
import iconArchive from 'src/assets/icons/admin/archive.svg';
import iconMove from 'src/assets/icons/admin/move.svg';
import { AdminTable } from 'src/components/admin/table.tsx';
import AdminListLayout from 'src/layouts/admin/list/index.astro';

const res = await api.list.$get();
const list = await res.json();
---

<AdminListLayout className={container}>
	<AdminTable
		rows={list.map((level, i) => ({
			rank: i + 1,
			name: level.name,
			user: level.user.name,
			req: level.requirement,
		}))}
		head={{
			rank: 'Rank',
			name: 'Name',
			user: 'User',
			req: 'Requirement',
		}}
		actions={[
			{
				label: 'Archive',
				icon: iconArchive,
				onClick: () => {},
			},
			{
				label: 'Move',
				icon: iconMove,
				onClick: () => {},
			},
		]}
		onAdd={() => {}}
	/>
	<!-- <Show when={editState()} keyed> -->
	<!-- 	{ -->
	<!-- 		(state) => ( -->
	<!-- 			<ListEdit list={list() || []} state={state} onReset={onReset} onSubmit={onSubmit} /> -->
	<!-- 		) -->
	<!-- 	} -->
	<!-- </Show> -->
</AdminListLayout>
